<div class="flex flex-col items-center justify-center min-h-screen p-4">
    <nz-card class="w-full max-w-md">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold mb-1">Terraform Wars</h1>
        <p class="text-gray-600">Enter your new password</p>
      </div>
      <form nz-form [formGroup]="passwordResetForm" (ngSubmit)="resetPassword()" nzLayout="vertical">

        <nz-form-item>
          <nz-form-label nzRequired class="font-medium">New password</nz-form-label>
          <nz-form-control nzErrorTip="Please enter a valid password!">
            <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate">
              <input [type]="isRawPasswordVisible ? 'text' : 'password'" nz-input formControlName="password1" placeholder="New password" autocomplete="password" class="w-full" />
            </nz-input-group>
            <ng-template #suffixTemplate>
              <span
                nz-icon
                [nzType]="isRawPasswordVisible ? 'eye' : 'eye-invisible'"
                (click)="isRawPasswordVisible = !isRawPasswordVisible"
                class="cursor-pointer"
              ></span>
            </ng-template>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzRequired class="font-medium">Confirm password</nz-form-label>
          <nz-form-control [nzErrorTip]="passwordResetForm.errors?.['passwordsMismatch'] ? 'Password does not match new password!' : 'Please enter a valid password!'">
            <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate">
              <input [type]="isRawPasswordVisible ? 'text' : 'password'" nz-input formControlName="password2" placeholder="Confirm password" autocomplete="password" class="w-full" />
            </nz-input-group>
            <ng-template #suffixTemplate>
              <span
                nz-icon
                [nzType]="isRawPasswordVisible ? 'eye' : 'eye-invisible'"
                (click)="isRawPasswordVisible = !isRawPasswordVisible"
                class="cursor-pointer"
              ></span>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <div class="flex justify-end items-center mb-6">
          <a nzType="link" routerLink="/auth/login">Back to login</a>
        </div>

        <button
          nz-button
          nzType="primary"
          [nzLoading]="loading"
          [disabled]="!passwordResetForm.valid || passwordResetForm.pristine || loading"
          class="w-full h-10"
        >
          Reset password
        </button>
      </form>
    </nz-card>
  </div>
